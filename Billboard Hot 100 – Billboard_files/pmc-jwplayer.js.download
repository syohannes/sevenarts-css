(()=>{"use strict";const t=window;let e=[],s={};t.pmc_trackJwPlayerScriptLoaders=s;class n{constructor(t){this.playerId=t,this.jwPlayerDefaults=null,this.callbacks=[]}load(){return this.playerId?_(`https://${w.content_mask||"content.jwplatform.com"}/libraries/${this.playerId}.js`,this.handleOnLoaded.bind(this)):t.jwplayer&&t.jwplayer.defaults&&t.jwplayer.defaults.pid&&(this.playerId=t.jwplayer.defaults.pid,this.handleOnLoaded()),this}handleOnLoaded(){const e=this.callbacks;if(t.jwplayer&&t.jwplayer.defaults){if(w.ads_suppression&&delete t.jwplayer.defaults.advertising,this.playerId!==t.jwplayer.defaults.pid&&console.log(`Warning: JwPlayerLoader load "${this.playerId}" seeing "${t.jwplayer.defaults.pid}"`),this.jwPlayerDefaults=t.jwplayer.defaults,Array.isArray(e)){const s=e=>{if("function"==typeof e)try{const s=t.jwplayer.defaults;t.jwplayer.defaults=this.jwPlayerDefaults,e(Object.assign({jwPlayer:t.jwplayer},this)),t.jwplayer.defaults=s}catch(e){t.console.log(e)}};this.callbacks={push:s},e.forEach((t=>{this.callbacks.push(t)}))}return this}}}const i=function(){const i=e;if(t.jwplayer&&t.jwplayer.defaults&&t.jwplayer.defaults.pid){const e=t.jwplayer.defaults.pid;s[e]=s[e]||new n(e),s[e].handleOnLoaded()}Array.isArray(i)&&(e={push:t=>{const{playerId:e,callback:i}=t;s[e]=s[e]||new n(e).load(),i&&s[e].callbacks.push(i)}},i.forEach((t=>{e.push(t)})))},a=function(t,s){e.push({playerId:t,callback:s})},o=window;let r=[],c=!1;const l=function(){w.comscore&&!c&&(c=!0,_("https://sb.scorecardresearch.com/c2/plugins/streamingtag_plugin_jwplayer.js",(()=>{const t=r;Array.isArray(t)&&(r={push:t=>{if(o.ns_&&o.ns_.StreamingAnalytics){const e=t.getConfig();o.ns_.StreamingAnalytics.JWPlayer(t,w.comscore),o.console.log("comscore tracking initialized",{vid:e.id})}}},t.forEach((t=>{r.push(t)})))})))},h=function(t){r.push(t)};class p{constructor(t,e,s,n){this.playerInstance=s,this.playlist=n,this.activeChannel=t,this.inActiveChannel=e,this.tryingChannel=this.activeChannel,this.channelStatusErrorCount=0}init(){this.playerInstance.on("playlistComplete",this.handleFinished.bind(this)),this.playerInstance.on("error",(t=>{230001===t.code&&(this.timer&&(clearTimeout(this.timer),delete this.timer),this.handleFinished())})),this.playerInstance.on("remove",(()=>{this.timer&&(clearTimeout(this.timer),delete this.timer),delete this.playerInstance,delete this.activeChannel,delete this.inActiveChannel,delete this.playlist,delete this.channelStatusErrorCount,delete this.tryingChannel})),this.checkChannelStatus()}handleFinished(){this.timer&&(clearTimeout(this.timer),delete this.timer),C("Waiting for Live Channel to become active."),this.playerInstance.setConfig({repeat:!0}),this.playerInstance.load(this.playlist),this.checkChannelStatus(),this.playerInstance.play()}checkChannelStatus(){var t;this.timer&&(clearTimeout(this.timer),delete this.timer),(t=this.tryingChannel,v(`https://cdn.jwplayer.com/live/channels/${t}.json`)).then((t=>{C(`Received channel ${this.tryingChannel} status: ${t.status}`),this.channelStatusErrorCount=0;const e=t.current_event;return!("active"!==t.status||!e)&&e})).then((t=>{if(t){if(this.tryingChannel!==this.activeChannel){const t=this.activeChannel;this.activeChannel=this.tryingChannel,this.inActiveChannel=t}this.configurePlayer(t).catch((t=>{I(`Failed to start live event stream playback: ${t}`)}))}else this.inActiveChannel&&this.tryingChannel!==this.inActiveChannel?(this.tryingChannel=this.inActiveChannel,this.checkChannelStatus()):(this.tryingChannel=this.activeChannel,this.timer=setTimeout(this.checkChannelStatus.bind(this),1e4))})).catch((t=>{if(this.channelStatusErrorCount++,I(`Unable to fetch the channel status for ${this.tryingChannel}: ${t}`),this.channelStatusErrorCount>3){if(this.tryingChannel!==this.activeChannel){const t=this.activeChannel;this.activeChannel=this.tryingChannel,this.inActiveChannel=t}this.channelStatusErrorCount=0,this.timer=setTimeout(this.checkChannelStatus.bind(this),1e4)}else this.checkChannelStatus()}))}async configurePlayer(t){let e,s=0;for(C(`Fetching playlist for ${t}.`);!e;)try{e=await(n=t,v(`https://cdn.jwplayer.com/v2/media/${n}`,{cache:"no-cache"}))}catch(n){if(++s,I(`Error fetching playlist: ${n}`),s>=3){C("Configuring Player with m3u8"),e={playlist:[{mediaid:t,file:`https://cdn.jwplayer.com/live/events/${t}.m3u8`}]};break}await b(2**(s-1)*5e3)}var n;this.playerInstance.setConfig({repeat:!1}),this.playerInstance.load(e.playlist),this.playerInstance.play(),C(`Playing live event stream with id '${t}'.`)}}const d=window,u=d.document;class y{constructor(t){this.divId=t,this.isReady=!1,this.actions=[],this.jwInstance=null,this.options={},this.callbacks=[]}whenReady(t){this.callbacks.push(t)}ready(t){if(this.isReady||!t)return;if(this.jwInstance=t(this.divId),!this.jwInstance)return void console.log(`Error instantiate JwPlayer instance for div ${this.divId}`);this.isReady=!0;const e=this.actions,s=this.callbacks;if(Array.isArray(e)){const t=t=>{this.doAction(t)};this.actions={push:t},e.forEach((t=>{this.actions.push(t)}))}if(Array.isArray(s)){const t=t=>{t(this.jwInstance)};this.callbacks={push:t},s.forEach((t=>{this.callbacks.push(t)}))}}doAction(t){const{cmd:e,args:s}=t;this.jwInstance&&this.jwInstance[e]&&("setup"===e?this.setup.apply(this,s):this.jwInstance[e].apply(this.jwInstance,s))}hasDirectSold(){return w&&w.has_direct_sold_ad}setup(t){if(t&&(this.options=t),this.adjustDeviceScreenSize().adjustAdvertisingTag().adjustFloating(),t&&(this.jwInstance.setup(this.options),this.options.channelId)){const{channelId:t,backupChannelId:e,playlist:s}=this.options;new p(t,e,this.jwInstance,s).init()}return this.applyCaption().monetize().pushVideoEvents().overlayCatapult().comscoreTracking(),this}adjustDeviceScreenSize(){try{const t=d.screen?.orientation?.angle||d.orientation||0;if(this.width=0==t||180==t?d.screen.width:d.screen.height,void 0!==d.devicePixelRatio&&d.devicePixelRatio>1&&(this.width=this.width/d.devicePixelRatio,this.width<300&&(this.width=300)),void 0!==this.options.width&&this.width<this.options.width){if(void 0!==this.options.height){const t=this.width/this.options.width;this.options.height=Math.floor(this.options.height*t)}this.options.width=this.width}}catch(t){d.console.log(t)}return this}adjustAdvertisingTag(){try{if(this.options&&this.options.advertising&&this.options.advertising.tag){const t=1e15*Math.random(),e=this.options.advertising.tag.replace("[rand]",t);this.options.advertising.tag=e}}catch(t){d.console.log(t)}return this}adjustFloating(t){let e=t;return(this.hasDirectSold()||w.disable_floating||w.noFloatIds.includes(this.divId))&&(e=!1),"boolean"==typeof e&&this.canFloat()&&(this.options.floating=e,this.jwInstance&&this.jwInstance.setFloating(e)),this}canFloat(){return void 0===this.options.floating||this.options.floating}applyCaption(){try{w.cc_enabled&&this.jwInstance&&(this.jwInstance.setCurrentCaptions(1),this.jwInstance.setCaptions())}catch(t){d.console.log(t)}return this}overlayCatapult(){try{if(w.cgid&&!w.ads_suppression&&this.jwInstance){const t=this.jwInstance;t.on("ready",(function(){if("undefined"==typeof CXBootstrapper)return!1;const e=new CXBootstrapper(w.cgid),s=t.getConfig();e.initCX({videoDescriptors:[{product:"overlay",videoElementId:s.id,playerType:"jwplayer"}]}),d.console.log("catapult initialized",{vid:s.id})}))}}catch(t){d.console.log(t)}return this}monetize(){try{if(w.ads_suppression)return this;if(d.blogherads=d.blogherads||{},d.blogherads.adq=d.blogherads.adq||[],!this.jwInstance)return this;const t=this.jwInstance,e=this.getPosition();d.blogherads.adq.push((function(){const s={subAdUnitPath:"instream",targeting:{}};e&&(s.targeting={vloc:e}),d.blogherads.monetizeJWPlayer(t,s);const n=t.getConfig();d.console.log("monetizeJWPlayer",{vid:n.id,pid:n.pid,options:s})}))}catch(t){d.console.log(t)}return this}pushVideoEvents(){d.blogherads=d.blogherads||{},d.blogherads.adq=d.blogherads.adq||[];const t=this.jwInstance;return d.blogherads.adq.push((function(){"function"==typeof d.blogherads.pushVideoPlayEventMeta&&d.blogherads.pushVideoPlayEventMeta({jwPlayerInstance:t})})),this}getPosition(){let t=!1;try{if(this.jwInstance){const e=this.jwInstance.getConfig();if("string"==typeof e.pmc_position?t=e.pmc_position:"string"==typeof e.vloc&&(t=e.vloc),"floating"===t&&this.hasDirectSold()&&(t="auto"),"auto"===t||!1===t){const e=this.jwInstance.getContainer(),s=u.body.getBoundingClientRect(),n=(e.getBoundingClientRect().top-s.top)/Math.max(u.documentElement.clientHeight,d.innerHeight||1);t=1.5>=n?"top":1.5<n&&5>n?"mid":"bottom"}}}catch(t){d.console.log(t)}return t}comscoreTracking(){if(this.jwInstance)try{h(this.jwInstance)}catch(t){d.console.log(t)}return this}}class g{constructor(t){this.id=t,this._pmc=new y(t,this)}instance(){const{jwInstance:t}=this._pmc;return t}whenReady(t){return this._pmc.whenReady(t),this}whenNoFloat(t){if("function"==typeof t)return this.noFloatCallback=t,this._pmc.canFloat()||this.noFloatCallback(),this}noFloat(){this._pmc.adjustFloating(!1),this.noFloatCallback&&this.noFloatCallback()}setup(t){return t&&(this._pmc.options=t),this._pmc.actions.push({cmd:"setup",args:Array.from(arguments)}),this}remove(){this._pmc.actions.push({cmd:"remove",args:Array.from(arguments)})}on(){this._pmc.actions.push({cmd:"on",args:Array.from(arguments)})}play(){this._pmc.actions.push({cmd:"play",args:Array.from(arguments)})}pause(){this._pmc.actions.push({cmd:"pause",args:Array.from(arguments)})}stop(){this._pmc.actions.push({cmd:"stop",args:Array.from(arguments)})}getState(){const{jwInstance:t}=this._pmc;return t?t.getState():"error"}getVolume(){const{jwInstance:t}=this._pmc;return t?t.getVolume():0}setVolume(){this._pmc.actions.push({cmd:"setVolume",args:Array.from(arguments)})}getMute(){const{jwInstance:t}=this._pmc;return t?t.getMute():0}setMute(){this._pmc.actions.push({cmd:"setMute",args:Array.from(arguments)})}getPlaylist(){const{jwInstance:t}=this._pmc;return t?t.getPlaylist():[]}getPlaylistIndex(){const{jwInstance:t}=this._pmc;return t?t.getPlaylistIndex():0}getPlugin(t){const{jwInstance:e}=this._pmc;return e?e.getPlugin(t):null}getContainer(){const{jwInstance:t}=this._pmc;return t?t.getContainer():null}getConfig(){const{jwInstance:t}=this._pmc;return t?t.getConfig():{}}playlistItem(){this._pmc.actions.push({cmd:"playlistItem",args:Array.from(arguments)})}load(){this._pmc.actions.push({cmd:"load",args:Array.from(arguments)})}next(){this._pmc.actions.push({cmd:"next",args:Array.from(arguments)})}}const m=window,f=m.document,w=m.pmc_jwplayer_options=m.pmc_jwplayer_options||{};w.noFloatIds=w.noFloatIds||[];const j={};function _(t,e,s,n){const i=f.createElement("script"),a=f.getElementsByTagName("script")[0];i.type="text/javascript",i.async=!0,(e||s)&&(i.onload=function(){"function"==typeof e&&e(),s&&i.parentNode.removeChild(i)}),i.src=t,n&&(i.id=n),a.parentNode.insertBefore(i,a)}function v(t,e){return fetch(t,e).then((e=>{if(!e.ok)throw new Error(`Unable to fetch ${t}: ${e.statusText}`);return e.json()}))}function C(t,e){m.console.log(t,e)}function I(t,e){m.console.error(t,e)}function b(t){return new Promise((e=>setTimeout(e,t)))}const A=window;function k(){["jwplayer_contextual_player_div","jwplayer_floating_preroll_ad"].forEach((t=>{w.noFloatIds.includes(t)||w.noFloatIds.push(t);const e=j[t];e&&e.noFloat()}))}function P(t){w.has_direct_sold_ad=t||!0,Object.values(j).forEach((t=>{t.noFloat()}))}const E={"dfp:isdirect=true":P,"floatingplayer=nofloat":k};const F=window;let S=!1;function $(t){i(),S||(S=!0,w.pid&&a(w.pid),t&&t.players&&Array.isArray(t.players)&&t.players.forEach((t=>{a(t)})),l(),w.cgid&&!w.ads_suppression&&_("https://tags.catapultx.com/bootstrapper"))}F.pmc_jwplayer=function(t,e){let s=e||function(t){const e=/jwplayer_[^_]+_([^_]+)(?:_div(?:_\d+)?)?/.exec(t);if(e&&2===e.length&&"div"!==e[1])return e[1];const s=f.getElementById(t);return s?s.getAttribute("data-playerid")||s.getAttribute("data-player"):null}(t);t||m.jwplayer&&(t=m.jwplayer().id),m.pmc&&m.pmc.hooks&&(s=m.pmc.hooks.apply_filters("pmc_jwplayer_id",s)),!s&&m.jwplayer&&m.jwplayer.defaults&&m.jwplayer.defaults.pid&&(s=m.jwplayer.defaults.pid),s&&"default"!==s||(s=w.pid);let n=j[t];return n||(n=new g(t),j[t]=n,a(s,(t=>{n._pmc.ready(t.jwPlayer)})),n.on("remove",(()=>{delete j[t]}))),n},F.pmc_jwplayer.init=$,F.pmc_jwplayer.loadScript=_,F.pmc_jwplayer.load=a,F.pmc_jwplayer.extractPlayListFromDivId=function(t){const e=f.getElementById(t);if(e){const t=e.getAttribute("data-jsonfeed");if(t&&t.length)return t}const s=/jwplayer_([^_]+)_[^_]+_div(?:_\d+)?/.exec(t);if(s&&2===s.length){return n=`feeds/${s[1]}.json`,`https://${w.content_mask||"content.jwplatform.com"}/${n}`}var n;return null},F.pmc_jwplayer.handleDirectSold=P,F.pmc_jwplayer.handleFloatingPlayerNoFloat=k,F.pmc_jwplayer.add=$,A.addEventListener("message",(function(t){const e=t.data;if("string"==typeof e&&0===e.indexOf("pmcadm:"))for(const[t,s]of Object.entries(E))e.indexOf(t)>=7&&s()}),!1),A.pmc&&A.pmc.hooks&&A.pmc.hooks.add_action("pmc_adm_dfp_direct_sold",P)})();